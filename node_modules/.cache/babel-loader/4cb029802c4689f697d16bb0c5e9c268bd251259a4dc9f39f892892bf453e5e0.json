{"ast":null,"code":"\"use client\";import{createContext,useContext,useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext(undefined);export const useAuth=()=>{const context=useContext(AuthContext);if(context===undefined){throw new Error(\"useAuth must be used within an AuthProvider\");}return context;};export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[isLoading,setIsLoading]=useState(true);useEffect(()=>{// Check if user is logged in on app start\nconst savedUser=localStorage.getItem(\"devshare_user\");if(savedUser){setUser(JSON.parse(savedUser));}setIsLoading(false);},[]);const login=async(email,password)=>{setIsLoading(true);// Simulate API call\nawait new Promise(resolve=>setTimeout(resolve,1000));// Mock authentication - check for admin credentials\nif(email&&password){let role=\"student\";let permissions=[];// Admin credentials\nif(email===\"admin@devshare.com\"||email.includes(\"admin\")){role=\"admin\";permissions=[\"manage_users\",\"manage_content\",\"manage_workshops\",\"manage_news\",\"delete_content\"];}else if(email.includes(\"teacher\")){role=\"teacher\";permissions=[\"create_workshops\",\"upload_content\"];}const mockUser={id:Date.now().toString(),name:email.split(\"@\")[0],email,role,joinDate:new Date().toISOString(),avatar:\"https://ui-avatars.com/api/?name=\".concat(email.split(\"@\")[0],\"&background=667eea&color=fff\"),permissions};setUser(mockUser);localStorage.setItem(\"devshare_user\",JSON.stringify(mockUser));setIsLoading(false);return true;}setIsLoading(false);return false;};const register=async function(name,email,password){let role=arguments.length>3&&arguments[3]!==undefined?arguments[3]:\"student\";setIsLoading(true);// Simulate API call\nawait new Promise(resolve=>setTimeout(resolve,1000));const permissions=role===\"teacher\"?[\"create_workshops\",\"upload_content\"]:[];const mockUser={id:Date.now().toString(),name,email,role,joinDate:new Date().toISOString(),avatar:\"https://ui-avatars.com/api/?name=\".concat(name,\"&background=667eea&color=fff\"),permissions};setUser(mockUser);localStorage.setItem(\"devshare_user\",JSON.stringify(mockUser));setIsLoading(false);return true;};const logout=()=>{setUser(null);localStorage.removeItem(\"devshare_user\");};const isAdmin=()=>{return(user===null||user===void 0?void 0:user.role)===\"admin\";};const isTeacher=()=>{return(user===null||user===void 0?void 0:user.role)===\"teacher\"||(user===null||user===void 0?void 0:user.role)===\"admin\";};const value={user,login,register,logout,isLoading,isAdmin,isTeacher};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["createContext","useContext","useState","useEffect","jsx","_jsx","AuthContext","undefined","useAuth","context","Error","AuthProvider","_ref","children","user","setUser","isLoading","setIsLoading","savedUser","localStorage","getItem","JSON","parse","login","email","password","Promise","resolve","setTimeout","role","permissions","includes","mockUser","id","Date","now","toString","name","split","joinDate","toISOString","avatar","concat","setItem","stringify","register","arguments","length","logout","removeItem","isAdmin","isTeacher","value","Provider"],"sources":["D:/untitled7/src/contexts/AuthContext.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\nimport { createContext, useContext, useState, useEffect, type ReactNode } from \"react\"\r\n\r\ninterface User {\r\n  id: string\r\n  name: string\r\n  email: string\r\n  avatar?: string\r\n  role: \"student\" | \"teacher\" | \"admin\"\r\n  joinDate: string\r\n  permissions?: string[]\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null\r\n  login: (email: string, password: string) => Promise<boolean>\r\n  register: (name: string, email: string, password: string, role?: \"student\" | \"teacher\") => Promise<boolean>\r\n  logout: () => void\r\n  isLoading: boolean\r\n  isAdmin: () => boolean\r\n  isTeacher: () => boolean\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext)\r\n  if (context === undefined) {\r\n    throw new Error(\"useAuth must be used within an AuthProvider\")\r\n  }\r\n  return context\r\n}\r\n\r\ninterface AuthProviderProps {\r\n  children: ReactNode\r\n}\r\n\r\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\r\n  const [user, setUser] = useState<User | null>(null)\r\n  const [isLoading, setIsLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    // Check if user is logged in on app start\r\n    const savedUser = localStorage.getItem(\"devshare_user\")\r\n    if (savedUser) {\r\n      setUser(JSON.parse(savedUser))\r\n    }\r\n    setIsLoading(false)\r\n  }, [])\r\n\r\n  const login = async (email: string, password: string): Promise<boolean> => {\r\n    setIsLoading(true)\r\n\r\n    // Simulate API call\r\n    await new Promise((resolve) => setTimeout(resolve, 1000))\r\n\r\n    // Mock authentication - check for admin credentials\r\n    if (email && password) {\r\n      let role: \"student\" | \"teacher\" | \"admin\" = \"student\"\r\n      let permissions: string[] = []\r\n\r\n      // Admin credentials\r\n      if (email === \"admin@devshare.com\" || email.includes(\"admin\")) {\r\n        role = \"admin\"\r\n        permissions = [\"manage_users\", \"manage_content\", \"manage_workshops\", \"manage_news\", \"delete_content\"]\r\n      } else if (email.includes(\"teacher\")) {\r\n        role = \"teacher\"\r\n        permissions = [\"create_workshops\", \"upload_content\"]\r\n      }\r\n\r\n      const mockUser: User = {\r\n        id: Date.now().toString(),\r\n        name: email.split(\"@\")[0],\r\n        email,\r\n        role,\r\n        joinDate: new Date().toISOString(),\r\n        avatar: `https://ui-avatars.com/api/?name=${email.split(\"@\")[0]}&background=667eea&color=fff`,\r\n        permissions,\r\n      }\r\n\r\n      setUser(mockUser)\r\n      localStorage.setItem(\"devshare_user\", JSON.stringify(mockUser))\r\n      setIsLoading(false)\r\n      return true\r\n    }\r\n\r\n    setIsLoading(false)\r\n    return false\r\n  }\r\n\r\n  const register = async (\r\n    name: string,\r\n    email: string,\r\n    password: string,\r\n    role: \"student\" | \"teacher\" = \"student\",\r\n  ): Promise<boolean> => {\r\n    setIsLoading(true)\r\n\r\n    // Simulate API call\r\n    await new Promise((resolve) => setTimeout(resolve, 1000))\r\n\r\n    const permissions = role === \"teacher\" ? [\"create_workshops\", \"upload_content\"] : []\r\n\r\n    const mockUser: User = {\r\n      id: Date.now().toString(),\r\n      name,\r\n      email,\r\n      role,\r\n      joinDate: new Date().toISOString(),\r\n      avatar: `https://ui-avatars.com/api/?name=${name}&background=667eea&color=fff`,\r\n      permissions,\r\n    }\r\n\r\n    setUser(mockUser)\r\n    localStorage.setItem(\"devshare_user\", JSON.stringify(mockUser))\r\n    setIsLoading(false)\r\n    return true\r\n  }\r\n\r\n  const logout = () => {\r\n    setUser(null)\r\n    localStorage.removeItem(\"devshare_user\")\r\n  }\r\n\r\n  const isAdmin = () => {\r\n    return user?.role === \"admin\"\r\n  }\r\n\r\n  const isTeacher = () => {\r\n    return user?.role === \"teacher\" || user?.role === \"admin\"\r\n  }\r\n\r\n  const value = {\r\n    user,\r\n    login,\r\n    register,\r\n    logout,\r\n    isLoading,\r\n    isAdmin,\r\n    isTeacher,\r\n  }\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}